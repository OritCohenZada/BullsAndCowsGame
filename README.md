# üéØ Bulls and Cows Game API

This project is the backend **REST API** for the classic number guessing game, **Bulls and Cows**, built with **Node.js, Express, and MongoDB**.  
The player's goal is to guess a **4-digit secret code** generated by the server. After each guess, the server provides feedback in the form of **Bulls** (correct digit in the correct position) and **Pgias** (correct digit in the wrong position).

---

## üöÄ Core Features

- **Player Management:** Create, update, delete, and view player profiles.  
- **Game Management:** Start a new game, submit guesses, and get the current game status.  
- **Game Logic:** Automatically generates a 4-digit secret code with **unique digits** for each game.  
- **Guess Feedback:** Calculates and returns the number of **Bulls** and **Pgias** for each guess.  
- **Win/Loss Conditions:** A game is won by guessing the code correctly. A game is lost after **10 incorrect attempts**.  
- **Player History:** Each player's profile tracks all the games they have played.  
- **Leaderboard:** A global leaderboard shows the **top 10 fastest wins** (based on the number of attempts).

---

## üéÆ API Endpoints

The API provides endpoints to **manage players and games**.

### Player Endpoints

| Method | Endpoint | Description | Request Body (Example) |
|--------|---------|------------|----------------------|
| POST | /players/add | Creates a new player. | `{ "_id": 123, "name": "John", "password": "...", "email": "..." }` |
| GET | /players/:playerID | Fetches a player's profile and their complete game history. | None |
| DELETE | /players/:playerID | Deletes a player. | None |
| PUT | /players/:playerID | Updates a player's name, password, or email. Requires current password for verification. | `{ "password": "current_pass", "name": "new_name" }` |
| GET | /players/:playerID/recent | Retrieves the most recent game played by the player. | None |
| GET | /players/best/leaderboard | Gets the top 10 winning games based on the fewest attempts. | None |

### Game Endpoints

| Method | Endpoint | Description | Request Body (Example) |
|--------|---------|------------|----------------------|
| POST | /games/start | Starts a new game for an existing player. | `{ "playerId": 123, "password": "..." }` |
| POST | /games/:gameId/guess | Submits a 4-digit guess to an active game. | `{ "guessNumbers": [1,2,3,4] }` |
| GET | /games/:gameId | Gets the current status and attempt history of a game. | None |
| POST | /games/:gameId/end | Manually ends a game, changing its status to 'ended'. | None |

---

## üíª Technologies Used

- Node.js  
- Express.js  
- TypeScript  
- MongoDB (Database)  
- Mongoose (Object Data Modeling for MongoDB)

---

## ‚ñ∂Ô∏è How to Run

1. **Clone the repository:**
```bash
git clone https://github.com/OritCohenZada/BullsAndCowsGame.git
cd BullsAndCowsGame
```

2. **Install dependencies:**
```bash
npm install
```

3. **Set up environment variables:**
Create a `.env` file in the root directory and add your MongoDB connection string:
```env
MONGO_URI=your_mongodb_connection_string
```

4. **Start the server:**
```bash
npm start
```

5. **For development with auto-reloading:**
```bash
npm run dev
```

